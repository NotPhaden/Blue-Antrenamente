<div class="container" id="feedbackContent" style="display:none;">
    <h1>Feedback și Sugestii</h1>
    <form id="feedbackForm">
        <input type="text" id="name" placeholder="Nume / Nickname" required>
        <textarea id="message" placeholder="Mesajul tău" required></textarea>
        <button type="submit">Trimite Feedback</button>
    </form>
    <div id="feedbackStatus"></div>
</div>
<div id="loginMessage">Trebuie să te autentifici pentru a vedea această pagină!</div>

<script>
const db = firebase.database();
const feedbackContent = document.getElementById("feedbackContent");
const loginMessage = document.getElementById("loginMessage");
const feedbackForm = document.getElementById("feedbackForm");
const feedbackStatus = document.getElementById("feedbackStatus");

auth.onAuthStateChanged(user=>{
    if(user){
        feedbackContent.style.display="block";
        loginMessage.style.display="none";
        profileLi.innerHTML=`<i class="fas fa-user"></i> ${user.displayName || user.email} <button onclick="logout()" style="margin-left:10px;padding:2px 6px;border:none;border-radius:5px;background:#ffdd57;cursor:pointer;">Logout</button>`;
        feedbackForm.addEventListener("submit", e=>{
            e.preventDefault();
            const msg = {name:document.getElementById("name").value, message:document.getElementById("message").value, userId:user.uid};
            db.ref("feedback").push(msg).then(()=>{
                feedbackStatus.textContent="Mesaj trimis!";
                feedbackForm.reset();
            }).catch(err=>feedbackStatus.textContent="Eroare: "+err);
        });
    } else {
        feedbackContent.style.display="none";
        loginMessage.style.display="block";
        profileLi.innerHTML='';
    }
});
</script>
